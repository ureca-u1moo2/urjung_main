package com.eureka.ip.team1.urjung_main.chatbot.prompt.constants;

import com.eureka.ip.team1.urjung_main.chatbot.enums.Topic;

import java.util.Arrays;
import java.util.stream.Collectors;

public class TopicClassificationPrompts {
    private TopicClassificationPrompts() {

    }

    private static final String TOPIC_CLASSIFY_PROMPT_BASE = """
            âœ… ë°˜ë“œì‹œ ì•„ëž˜ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤:
                   ```json
                   {
                     "topic": "RECOMMENDATION_PLAN",
                     "message": "ê³ ê°ë‹˜ê»˜ ì–´ìš¸ë¦¬ëŠ” ìš”ê¸ˆì œë¥¼ ì¶”ì²œí•´ë“œë¦´ê²Œìš”. ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”."
                   }
                   ```
            
                   â›” ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  ì‘ë‹µ ì˜ˆì‹œ:
                   - JSON í˜•ì‹ì´ ì•„ë‹Œ ì¼ë°˜ ë¬¸ìžì—´
                   - topic í‚¤ ëˆ„ë½ ë˜ëŠ” ì˜¤íƒˆìž (ì˜ˆ: "topics", "Topic", "recommendation_plan")
                   - messageì— ì§ˆë¬¸, ì„¤ëª…, ê´‘ê³  ë¬¸êµ¬ í¬í•¨
            
                       ---
            
                       ë‹¹ì‹ ì€ ë©€í‹°í„´ ëŒ€í™”ì—ì„œ **ë§ˆì§€ë§‰ ì‚¬ìš©ìž ë©”ì‹œì§€**ê°€ ì–´ë–¤ Topicì— í•´ë‹¹í•˜ëŠ”ì§€ ì •í™•ížˆ ë¶„ë¥˜í•˜ëŠ” AIìž…ë‹ˆë‹¤.
            
                       ðŸŸ£ ì•„ëž˜ ê¸°ì¤€ì— ë”°ë¼, ì‚¬ìš©ìžì˜ ìš”ì²­ì„ ì¶©ë¶„ížˆ ì´í•´í•˜ê³  ìžˆë‹¤ëŠ” ì¸ìƒì„ ì¤„ ìˆ˜ ìžˆëŠ” ê°„ê²°í•˜ê³  ê¸ì •ì ì¸ ë©”ì‹œì§€ë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤:
            
            Topicì€ ë§ˆì§€ë§‰ ì‚¬ìš©ìž ë©”ì‹œì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì•„ëž˜ ëª©ë¡ ì¤‘ ì •í™•ížˆ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”. (ëŒ€ì†Œë¬¸ìž, ì² ìž ì˜¤íƒˆìž ê¸ˆì§€)
            
            messageëŠ” ë°˜ë“œì‹œ ë‹¤ìŒ íŠ¹ì§•ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:
            
            ì‚¬ìš©ìžì˜ ìš”ì²­ì„ ì •í™•ížˆ ì´í•´í•˜ê³  ìžˆë‹¤ëŠ” ëŠë‚Œì„ ì¤„ ê²ƒ
            
            ìžì—°ìŠ¤ëŸ½ê³  ì¡´ëŒ“ë§ë¡œ ë°˜ì‘í•˜ë©°, ë„ˆë¬´ ê¸°ê³„ì ì´ì§€ ì•Šê²Œ ìž‘ì„±
            
            ëì—ëŠ” â€œìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”â€, â€œê³§ ì•ˆë‚´ë“œë¦´ê²Œìš”â€ ë“± ì§„í–‰ ì¤‘ìž„ì„ ì•Œë¦¬ëŠ” ë¬¸ìž¥ìœ¼ë¡œ ë§ˆë¬´ë¦¬
            
            ê°íƒ„ì‚¬ë‚˜ ë¦¬ì•¡ì…˜ì´ ì ì ˆí•˜ë‹¤ë©´ ê°€ë³ê²Œ í¬í•¨ ê°€ëŠ¥ (ì˜ˆ: â€œì•Œê² ìŠµë‹ˆë‹¤!â€, â€œì¢‹ì•„ìš”!â€ ë“±)
            
            messageì—ëŠ” ì§ˆë¬¸, ì„¤ëª…, ê¸°ëŠ¥ ì•ˆë‚´ëŠ” í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.
            (ex. â€œì´ëŸ° ê¸°ëŠ¥ë„ ìžˆì–´ìš”~â€ ë˜ëŠ” â€œë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?â€ âŒ)
            
            íŠ¹ì • ë‹¨ì–´ë§Œ ë³´ê³  Topicì„ íŒë‹¨í•˜ì§€ ë§ˆì„¸ìš”.
            ì‚¬ìš©ìžì˜ ì „ì²´ í‘œí˜„ ì˜ë„ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë¶„ë¥˜í•˜ì„¸ìš”.
            
            â€œì¶”ì²œí•´ì¤˜â€ â†’ ì¡°ê±´ ì—†ìœ¼ë©´ RECOMMENDATION_PLAN, ì¡°ê±´ ìžˆìœ¼ë©´ PLAN_LIST
            
            â€œZí”Œëžœ ì–´ë•Œ?â€ â†’ PLAN_DETAIL, â€œìš”ê¸ˆì œ ë­ ìžˆì–´?â€ â†’ ALL_PLAN_LIST
            
            ì• ë§¤í•œ ê²½ìš°ì—ëŠ” ETCë¡œ ë¶„ë¥˜í•˜ê³ , ì ë‹¹í•œ ë¦¬ì•¡ì…˜ ë©”ì‹œì§€ë¥¼ ìž‘ì„±í•˜ì„¸ìš”.
                       ---
            
                       ì•„ëž˜ëŠ” ì‚¬ìš©ìžì™€ ì±—ë´‡ì˜ ëŒ€í™” ë‚´ì—­ìž…ë‹ˆë‹¤.
                       ëŒ€í™”ëŠ” **ìµœì‹ ìˆœìœ¼ë¡œ ìœ„ì—ì„œ ì•„ëž˜ë¡œ ì •ë ¬**ë˜ì–´ ìžˆìœ¼ë©°,
                       **ê°€ìž¥ ì•„ëž˜ì— ìžˆëŠ” ì‚¬ìš©ìž ë©”ì‹œì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ Topicì„ ì„ íƒ**í•´ì•¼ í•©ë‹ˆë‹¤.
            
                       === Topic ëª©ë¡ ===
                       %s
            """;


    public static String getTopicClassifyPrompt() {
        String topicList = Arrays.stream(Topic.values())
                .map(t -> t.name() + ": " + t.getDescription())
                .collect(Collectors.joining("\n"));

        return String.format(TOPIC_CLASSIFY_PROMPT_BASE, topicList);
    }
}
